<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Deepwhite Publisher Settings</title>
<link rel="stylesheet" href="css/common.css" />
<style>
.field .hint {
  margin-top: 4px;
}

#savedHint {
  transition: color var(--transition-fast);
}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="brand">
        <h1 class="title">Settings</h1>
        <p class="subtitle">github repo & journal path</p>
      </div>
      <div class="actions">
        <button class="btn btn-primary" id="save">保存</button>
      </div>
    </div>
    <div style="padding:10px 16px; display:flex; align-items:center; gap:12px;">
      <div>
        <div class="label">本地保存文件夹</div>
        <div id="folderName" class="hint">未选择</div>
      </div>
      <div style="margin-left:auto; display:flex; gap:8px;">
        <button class="btn" id="pickFolder">选择文件夹</button>
        <button class="btn" id="clearFolder">清除</button>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <div class="label">Repository</div>
        <input
          class="input"
          id="repoUrl"
          placeholder="owner/repo 或 https://github.com/owner/repo"
          autocomplete="off"
          required
        />
        <div class="hint">仓库地址（支持 owner/repo、HTTPS URL 或 git@github.com:owner/repo.git）</div>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <div class="label">Branch</div>
        <input 
          class="input" 
          id="branch" 
          placeholder="main" 
          autocomplete="off"
          required
        />
        <div class="hint">Git 分支名称</div>
      </div>
      <div class="field">
        <div class="label">Target Dir</div>
        <input 
          class="input" 
          id="targetDir" 
          placeholder="src/content/posts/dynamic/journals" 
          autocomplete="off"
          required
        />
        <div class="hint">仓库内目标目录（文件名 YYYY-MM-DD.md）</div>
      </div>
    </div>

    <div class="row">
      <div class="field" style="display:flex; align-items:center; gap:12px;">
        <label style="display:flex; align-items:center; gap:8px;">
          <input type="checkbox" id="pushToGithub" />
          <span>推送到 GitHub</span>
        </label>
        <div class="hint">开启后每次发表会向远程仓库推送</div>
      </div>
    </div>

    <div style="margin-top:8px;">
      <button id="advancedToggle" class="btn">高级选项</button>
      <div id="advancedSection" style="display:none; margin-top:10px;">
        <div class="row">
          <div class="field">
            <div class="label">Commit Prefix</div>
            <input 
              class="input" 
              id="commitPrefix" 
              placeholder="dynamic:" 
              autocomplete="off"
            />
            <div class="hint">Git 提交信息前缀（可选）</div>
          </div>
          <div class="field">
            <div class="label">GitHub Token</div>
            <input 
              class="input" 
              id="githubToken" 
              placeholder="个人访问令牌（PAT）" 
              autocomplete="off"
              type="password"
            />
            <div class="hint">用于推送到 GitHub（仅在开启推送时需要）。</div>
          </div>
        </div>
        <div style="margin-top:8px;">
          <button class="btn" id="testConnection">测试连接</button>
          <span id="testResult" class="hint" style="margin-left:10px;"></span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <div class="label">Local Folder</div>
        <div style="display:flex; gap:8px; align-items:center;">
          <button class="btn" id="pickFolder">选择文件夹</button>
          <button class="btn" id="clearFolder">清除</button>
          <div id="folderName" class="hint" style="margin-left:8px;"></div>
        </div>
        <div class="hint">选择本地目标文件夹（浏览器文件系统访问 API）。用于本地创建 md 文件。</div>
      </div>
      <div class="field">
        <div class="label">GitHub Token</div>
        <input 
          class="input" 
          id="githubToken" 
          placeholder="个人访问令牌（PAT）" 
          autocomplete="off"
          type="password"
        />
        <div class="hint">用于推送到 GitHub（建议只在本地保管）。仅当 Mode 选择“真实推送”时使用。</div>
      </div>
    </div>

    <div class="footer">
      <div class="hint" id="savedHint"></div>
      <div class="hint">UI 基于站点 style.css 变量：白底、细边框、胶囊按钮</div>
    </div>
  </div>
<script type="module" src="js/options.js"></script>
</body>
</html>
