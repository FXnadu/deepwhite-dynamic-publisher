# 快速测试指南

## 🚀 快速开始

### 1. 加载扩展（30秒）

1. **打开 Chrome** → 访问 `chrome://extensions/`
2. **开启开发者模式**（右上角开关）
3. **点击"加载已解压的扩展程序"**
4. **选择项目目录**：`/Users/warmwhite/Documents/deepwhite-dynamic-publisher`
5. ✅ 完成！扩展图标应该出现在工具栏

### 2. 基础功能测试清单

#### ✅ Popup 页面测试
- [ ] 点击扩展图标，弹出窗口正常显示
- [ ] 点击"打开浮窗编辑器"按钮
- [ ] 编辑器窗口成功打开

#### ✅ Editor 页面测试
- [ ] 输入文本，字数统计实时更新
- [ ] 等待几秒，草稿自动保存（状态显示"已保存到本地"）
- [ ] 按 `Ctrl+S` (Mac: `Cmd+S`)，手动保存成功
- [ ] 点击"清空"按钮，弹出确认对话框
- [ ] 点击"发表"按钮，显示预览对话框
- [ ] 关闭窗口后重新打开，内容仍然存在

#### ✅ Options 页面测试
- [ ] 点击"设置"按钮，打开设置页面
- [ ] 修改设置并保存，显示成功提示
- [ ] 留空必填字段，显示错误提示

#### ✅ 窗口管理测试
- [ ] 调整编辑器窗口大小和位置
- [ ] 关闭窗口
- [ ] 重新打开，窗口恢复到上次的位置和大小

## 🐛 调试技巧

### 打开开发者工具

| 页面 | 方法 |
|------|------|
| **Popup** | 右键扩展图标 → "检查弹出内容" |
| **Editor** | 在编辑器窗口按 `F12` |
| **Options** | 在设置页面按 `F12` |
| **Service Worker** | `chrome://extensions/` → 找到扩展 → 点击"service worker" |

### 查看存储数据

在 Console 中运行：

```javascript
// 查看所有存储数据
chrome.storage.local.get(null, console.log);
chrome.storage.sync.get(null, console.log);

// 清除所有数据（测试用）
chrome.storage.local.clear();
chrome.storage.sync.clear();
```

### 重新加载扩展

修改代码后：
1. 在 `chrome://extensions/` 页面
2. 点击扩展的 **🔄 刷新按钮**
3. 或点击 **移除** 后重新加载

## ⚠️ 常见问题

### 扩展图标不显示
- ✅ 检查 `icons/` 目录是否存在图标文件
- ✅ 检查 `manifest.json` 路径是否正确

### 点击没反应
- ✅ 打开 Service Worker 控制台查看错误
- ✅ 检查 Console 是否有 JavaScript 错误

### 模块导入失败
- ✅ 确保 HTML 中使用 `<script type="module">`
- ✅ 检查文件路径是否正确（相对路径）

### 窗口打不开
- ✅ 检查 `manifest.json` 中是否有 `windows` 权限
- ✅ 查看 Service Worker 控制台的错误信息

## 📝 测试场景

### 场景1：完整写作流程
1. 打开编辑器
2. 输入一段 Markdown 文本
3. 等待自动保存
4. 点击"发表"查看预览
5. 关闭窗口
6. 重新打开，确认草稿已保存

### 场景2：快捷键测试
1. 输入内容
2. 按 `Ctrl+S` 手动保存
3. 按 `Ctrl+Enter` 发表
4. 确认功能正常

### 场景3：错误处理
1. 在设置页面留空必填字段
2. 点击保存
3. 确认显示错误提示
4. 填写正确信息后保存成功

## 🎯 预期行为

- ✅ 所有操作都有视觉反馈（Toast、状态更新）
- ✅ 自动保存延迟约 500ms
- ✅ 窗口位置和大小会被记住
- ✅ 草稿数据持久化保存
- ✅ 快捷键响应正常

